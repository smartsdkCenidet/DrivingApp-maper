<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 90%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    

    <div id="map"></div>
    <script>
      function initMap() {
        var recorridos = [[18.87983216, -99.22089856],[18.87987147, -99.2209071],[18.87989406, -99.2209117],[18.87990451, -99.22090933],[18.87988684, -99.22091724],[18.87990756, -99.22092334],[18.87992597, -99.22091984],[18.87993751, -99.22092028],[18.87996899, -99.2209626],[18.87997296, -99.22097399],[18.88001073, -99.22097884],[18.88000266, -99.22096759],[18.88001652, -99.22099336],[18.88002614, -99.22099576],[18.88005894, -99.22098533],[18.88006531, -99.22099318],[18.8800476, -99.2209756],[18.88011996, -99.22099634],[18.8801498, -99.22099971],[18.8801594, -99.2210139],[18.88018007, -99.22100242],[18.88019187, -99.22101519],[18.88020882, -99.2210321],[18.88023527, -99.22103799],[18.88024385, -99.22103871],[18.88025878, -99.22103306],[18.88029211, -99.22104615],[18.88030883, -99.22103893],[18.88030931, -99.2210351],[18.88030189, -99.22102943],[18.88034278, -99.22102184],[18.8803621, -99.22101672],[18.88038207, -99.22101613],[18.88040095, -99.22101119],[18.88043313, -99.22099358],[18.8804276, -99.22097519],[18.88044013, -99.22096484],[18.88044588, -99.22095778],[18.88046277, -99.22094689],[18.88046932, -99.22094079],[18.88048206, -99.2209124],[18.88049086, -99.22089762],[18.88050384, -99.22086447],[18.88051769, -99.22085803],[18.88056049, -99.22085423],[18.88056374, -99.22084301],[18.8805829, -99.22082047],[18.88059281, -99.22080745],[18.88061312, -99.22079294],[18.88062391, -99.2207887],[18.88064492, -99.22077943],[18.88066031, -99.22077588],[18.88066389, -99.22074678],[18.88067303, -99.22074109],[18.88068601, -99.22073016],[18.88069372, -99.22072279],[18.88071331, -99.22072369],[18.88071571, -99.22072345],[18.88073107, -99.22069796],[18.8806924, -99.220851],[18.88074279, -99.22068897],[18.88074744, -99.22068878],[18.88078307, -99.22067995],[18.88079219, -99.22067341],[18.88082674, -99.22066751],[18.88082986, -99.2206657],[18.88085952, -99.22065698],[18.88088352, -99.22066568],[18.88090702, -99.22066129],[18.8809187, -99.22066295],[18.880941, -99.22064561],[18.88095816, -99.22064296],[18.88098462, -99.22064123],[18.88099858, -99.22063275],[18.88103735, -99.2206402],[18.8810482, -99.2206394],[18.88105787, -99.22064642],[18.88107064, -99.22063903],[18.88108598, -99.22062462],[18.88110186, -99.22062499],[18.88113825, -99.22062237],[18.88114724, -99.22061447],[18.88116702, -99.22061116],[18.88117185, -99.22060934],[18.88120105, -99.22061],[18.88120744, -99.22060801],[18.88124281, -99.22060803],[18.88126115, -99.22061142],[18.8811247, -99.2205981],[18.88128308, -99.22061033],[18.88130245, -99.22059849],[18.88131067, -99.22059648],[18.88134312, -99.22059375],[18.88135431, -99.22058617],[18.88137675, -99.22057975],[18.88139956, -99.22058918],[18.88142478, -99.22058997],[18.88145524, -99.22059207],[18.88146058, -99.2205877],[18.88146597, -99.2205916],[18.88149774, -99.22059834],[18.88150868, -99.22059],[18.88152631, -99.22058731],[18.88153388, -99.22049195],[18.88154784, -99.22049685],[18.88156897, -99.22050088],[18.8815776, -99.22049839],[18.88157004, -99.22048497],[18.88159809, -99.22048812],[18.8816106, -99.22049288],[18.88162742, -99.22049228],[18.8816242, -99.22049315],[18.8816286, -99.22048335],[18.88164593, -99.22049216],[18.88165176, -99.22049887],[18.88165322, -99.22049237],[18.88170206, -99.22049455],[18.88172236, -99.22049189],[18.88173362, -99.22048369],[18.88174191, -99.22048161],[18.88175367, -99.22048594],[18.88174011, -99.2204766],[18.8817511, -99.2204848],[18.88175716, -99.22048352]]
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 18, 
                center: {lat: 18.879258, lng: -99.220336},
                //mapTypeId: 'terrain'
            });
            var infowindow = new google.maps.InfoWindow();


            //CODE OF MAP VIEWER ADD

            var convert = (array) =>{
              let temp = []
              array.map((coors) => {
                temp.push({ lat: coors[0], lng: coors[1] });
              })
              return temp;
            }

            
            
            function makeInfoWindowEvent(map, infowindow, contentString, marker) {
                google.maps.event.addListener(marker, 'click', function() {
                    infowindow.setContent(contentString);
                    infowindow.open(map, marker);
                });
            }
            
            var drawRecorrido = () => {
                var drawParking = new google.maps.Polyline({
                    path:convert(recorridos),
                    geodesic: true,
                    strokeColor: '#2980b9',
                    strokeWeight: 5
                });
                drawParking.setMap(map);
                
                recorridos.map((coords) =>{
                        if(coords[0] != 18.8811247 && coords[0] != 18.8806924){
                            var myLatLng = {lat: coords[0], lng: coords[1]};
                            var marker = new google.maps.Marker({
                                position: myLatLng,
                                map: map,
                                title: JSON.stringify(coords[0])
                            });
                            makeInfoWindowEvent(map, infowindow, JSON.stringify(coords[0]), marker);
                        } 
                        
                                      
                })
            }

            
            drawRecorrido();
            //loadZonesOnMap()
            //loadRoadSegments()
            //loadParkings()
            

        }
        initMap();
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBKylGqXGF6dkieX9tcSsneA18xX-tAROw&callback=initMap"
    async defer></script>
  </body>
</html>
